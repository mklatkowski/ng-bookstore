<article class="m-3">
    <h2>Edit Book</h2>
    <form [formGroup]="form" (ngSubmit)="save()" class="d-flex flex-column gap-3">

        <div>
            <label>Title</label>
            <input formControlName="title" class="form-control"
                [class.is-invalid]="form.get('title')?.invalid && form.get('title')?.touched">
            <div *ngIf="form.get('title')?.errors?.['required']" class="text-danger">Title is required.</div>
            <div *ngIf="form.get('title')?.errors?.['maxlength']" class="text-danger">Max 50 characters.</div>
        </div>

        <div>
            <label>Author</label>
            <input formControlName="author" class="form-control"
                [class.is-invalid]="form.get('author')?.invalid && form.get('author')?.touched">
            <div *ngIf="form.get('author')?.errors?.['required']" class="text-danger">Author is required.</div>
            <div *ngIf="form.get('author')?.errors?.['maxlength']" class="text-danger">Max 50 characters.</div>
        </div>

        <div>
            <label>Year</label>
            <input type="number" formControlName="year" class="form-control"
                [class.is-invalid]="form.get('year')?.invalid && form.get('year')?.touched">
            <div *ngIf="form.get('year')?.errors?.['min'] || form.get('year')?.errors?.['max']" class="text-danger">
                Year must be between 1000 and 2023.
            </div>
        </div>

        <div>
            <label>Description</label>
            <textarea formControlName="description" class="form-control" rows="5"
                [class.is-invalid]="form.get('description')?.invalid && form.get('description')?.touched"></textarea>
            <div *ngIf="form.get('description')?.errors?.['maxlength']" class="text-danger">Max 1000 characters.</div>
        </div>

        <div class="d-flex gap-2">
            <button type="submit" class="btn btn-primary" [disabled]="form.invalid || !form.dirty">Save</button>
            <button type="button" class="btn btn-secondary" (click)="cancel()">Cancel</button>
        </div>

    </form>
</article>